!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.solar=e()}(this,function(){"use strict";function n(n){return(n=new Date(+n)).setUTCHours(0,0,0,0),n}function e(n){return(n=new Date(+n)).setHours(0,0,0,0),n}function t(n){var e=h(n),t=i(n),r=a(n),u=x(c(n)/2);return(u*=u)*w(2*r)-2*e*w(t)+4*e*u*w(t)*p(2*r)-.5*u*u*w(4*r)-1.25*e*e*w(2*t)}function r(n){return m(w(c(n))*w(u(n)))}function u(n){return o(n)-(.00569+.00478*w((125.04-1934.136*n)*C))*C}function o(n){return a(n)+f(n)}function i(n){return(357.52911+n*(35999.05029-1537e-7*n))*C}function a(n){var e=(280.46646+n*(36000.76983+3032e-7*n))%360;return(e<0?e+360:e)/180*T}function f(n){var e=i(n);return(w(e)*(1.914602-n*(.004817+14e-6*n))+w(e+e)*(.019993-101e-6*n)+289e-6*w(e+e+e))*C}function c(n){return s(n)+.00256*p((125.04-1934.136*n)*C)*C}function s(n){return(23+(26+(21.448-n*(46.815+n*(59e-5-.001813*n)))/60)/60)*C}function h(n){return.016708634-n*(42037e-9+1.267e-7*n)}var v=Date.UTC(2e3,0,1,12),M=Math.abs,d=Math.acos,m=Math.asin,p=Math.cos,D=Math.max,l=Math.min,w=Math.sin,x=Math.tan,y=1e-6,T=Math.PI,b=2*T,C=T/180,H=180/T;return function(u){function o(e){var u=(e-v)/315576e7,o=r(u),i=p(o),a=w(o),f=((e-n(e))/864e5*b+t(u)+c)%b-T,s=d(D(-1,l(1,m*a+h*i*p(f)))),U=h*w(s);f<-T&&(f+=b),M(U)>y&&(f=(f>0?-1:1)*(T-d(D(-1,l(1,(m*p(s)-a)/U))))),f<0&&(f+=b);var g=90-s*H;if(g<=85){var j=x(g*C);s-=(g>5?58.1/j-.07/(j*j*j)+86e-6/(j*j*j*j*j):g>-.575?1735+g*(g*(103.4+g*(.711*g-12.79))-518.2):-20.774/j)/3600*C}return[f*H,90-s*H]}function i(r){var u=(n(r)-v)/315576e7,o=(f-t(u+(f-t(u-a/13149e3)*H*4)/52596e3)*H*4-r.getTimezoneOffset())%1440;return o<0&&(o+=1440),new Date(+e(r)+60*o*1e3)}var a=u[0],f=720-4*a,c=u[0]*C,s=u[1]*C,h=p(s),m=w(s);return{position:o,noon:i}}});